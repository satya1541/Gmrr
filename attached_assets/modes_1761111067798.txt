html:


<p>Dark mode 3 state switch &nbsp;
  <input type="range" name="darkLightSwitch" min="1" step="1" id="darkLightSwitch" max="3" value="2">
</p>

css:

* {
  box-sizing: border-box;
}

body {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  height: 100vh;
  color: #444;
  transition: background-color 0.6s;
}
body.dark {
  background-color: #383a42;
  color: #eee; 
}
p {
  font-size: 2rem;
  line-height:50px;
  vertical-align:middle;
  font-family: Arial, Helvetica, sans-serif;
}

#darkLightSwitch {
  vertical-align:middle;
  background-color: #ccc;
  width: 180px;
  height: 60px;
  border-radius: 30px;
  margin: 0;
  padding: 10px;
  cursor: pointer;
  color: red;
  position: relative;
  -webkit-appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg width='35' height='35' viewBox='0 0 35 35' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M17.5 35L14.2959 28.5439C15.3133 28.8386 16.3877 29 17.5 29C18.612 29 19.686 28.8384 20.7031 28.5439L17.5 35ZM7.42383 23.0449C8.47439 24.9499 10.0492 26.5244 11.9541 27.5752L5.12598 29.874L7.42383 23.0449ZM29.874 29.874L23.0449 27.5752C24.95 26.5245 26.5245 24.95 27.5752 23.0449L29.874 29.874ZM17.5 7.09961C18.8796 7.09961 20.1957 7.37053 21.4004 7.8584L21.4512 7.96094L21.5615 7.92285C24.039 8.97488 26.0238 10.9602 27.0762 13.4375L27.0391 13.5488L27.1406 13.5986C27.6288 14.8037 27.9004 16.1199 27.9004 17.5C27.9004 18.8798 27.6286 20.1956 27.1406 21.4004L27.0391 21.4512L27.0762 21.5615C26.024 24.0391 24.0391 26.024 21.5615 27.0762L21.4512 27.0391L21.4004 27.1406C20.1956 27.6286 18.8798 27.9004 17.5 27.9004C16.1199 27.9004 14.8037 27.6288 13.5986 27.1406L13.5488 27.0391L13.4375 27.0762C10.9602 26.0238 8.97488 24.039 7.92285 21.5615L7.96094 21.4512L7.8584 21.4004C7.37053 20.1957 7.09961 18.8796 7.09961 17.5C7.09961 16.12 7.37032 14.8036 7.8584 13.5986L7.96094 13.5488L7.92285 13.4375C8.97502 10.9603 10.9603 8.97502 13.4375 7.92285L13.5488 7.96094L13.5986 7.8584C14.8036 7.37032 16.12 7.09961 17.5 7.09961ZM6.45508 14.2959C6.16048 15.3132 6 16.3878 6 17.5C6 18.6119 6.16065 19.6861 6.45508 20.7031L0 17.5L6.45508 14.2959ZM35 17.5L28.5439 20.7031C28.8384 19.686 29 18.612 29 17.5C29 16.3877 28.8386 15.3133 28.5439 14.2959L35 17.5ZM11.9541 7.42383C10.0493 8.47447 8.47447 10.0493 7.42383 11.9541L5.12598 5.12598L11.9541 7.42383ZM27.5752 11.9541C26.5244 10.0492 24.9499 8.47439 23.0449 7.42383L29.874 5.12598L27.5752 11.9541ZM20.7031 6.45508C19.6861 6.16065 18.6119 6 17.5 6C16.3878 6 15.3132 6.16048 14.2959 6.45508L17.5 0L20.7031 6.45508Z' fill='%23666'/%3E%3C/svg%3E%0A"),
  url("data:image/svg+xml,%3Csvg width='35' height='35' viewBox='0 0 35 35' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M22.772 25.604H11.714L9.814 31H5.292L14.754 4.552H19.77L29.232 31H24.672L22.772 25.604ZM21.556 22.07L17.262 9.796L12.93 22.07H21.556Z' fill='%23666'/%3E%3C/svg%3E%0A"),
  url("data:image/svg+xml,%3Csvg width='35' height='35' viewBox='0 0 35 35' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M21.6271 3.69749C29.3005 6.36716 33.9066 14.9306 31.2599 22.5389C28.6128 30.1472 19.5868 34.2667 12.1964 31.0863C10.2361 30.2427 8.47849 29.0834 7.00306 27.6944C13.4772 29.12 20.141 25.5029 22.3758 19.0799C24.5821 12.7383 21.7058 5.86091 15.8955 2.8956C17.7836 2.78471 19.7266 3.03636 21.6271 3.69749Z' fill='%23666'/%3E%3C/svg%3E%0A");    
  background-position: 13px center, 74px center, 130px center;
  background-repeat: no-repeat;
  transition: background-color 0.6s;
}
@keyframes LightAnim {
  from { background-size: 0px 0px; top: 30px; }
  to { background-size: 25px 25px; top: 17px; }
}
@keyframes AutoAnim {
  from { background-size: 0px 0px; top: 30px; }
  to { background-size: 25px 25px; top: 17px; }
}
@keyframes DarkAnim {
  from { background-size: 0px 0px; top: 30px; }
  to { background-size: 25px 25px; top: 17px; }
}

#darkLightSwitch::before {
  content: '';
  position: absolute;
  width: 35px;
  height: 35px;
  background-repeat: no-repeat;
  background-color: transparent;
  top: 17px;
  background-size: 25px 25px;
}
#darkLightSwitch.light::before{
  background-image: url("data:image/svg+xml,%3Csvg width='35' height='35' viewBox='0 0 35 35' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M17.5 35L14.2959 28.5439C15.3133 28.8386 16.3877 29 17.5 29C18.612 29 19.686 28.8384 20.7031 28.5439L17.5 35ZM7.42383 23.0449C8.47439 24.9499 10.0492 26.5244 11.9541 27.5752L5.12598 29.874L7.42383 23.0449ZM29.874 29.874L23.0449 27.5752C24.95 26.5245 26.5245 24.95 27.5752 23.0449L29.874 29.874ZM17.5 7.09961C18.8796 7.09961 20.1957 7.37053 21.4004 7.8584L21.4512 7.96094L21.5615 7.92285C24.039 8.97488 26.0238 10.9602 27.0762 13.4375L27.0391 13.5488L27.1406 13.5986C27.6288 14.8037 27.9004 16.1199 27.9004 17.5C27.9004 18.8798 27.6286 20.1956 27.1406 21.4004L27.0391 21.4512L27.0762 21.5615C26.024 24.0391 24.0391 26.024 21.5615 27.0762L21.4512 27.0391L21.4004 27.1406C20.1956 27.6286 18.8798 27.9004 17.5 27.9004C16.1199 27.9004 14.8037 27.6288 13.5986 27.1406L13.5488 27.0391L13.4375 27.0762C10.9602 26.0238 8.97488 24.039 7.92285 21.5615L7.96094 21.4512L7.8584 21.4004C7.37053 20.1957 7.09961 18.8796 7.09961 17.5C7.09961 16.12 7.37032 14.8036 7.8584 13.5986L7.96094 13.5488L7.92285 13.4375C8.97502 10.9603 10.9603 8.97502 13.4375 7.92285L13.5488 7.96094L13.5986 7.8584C14.8036 7.37032 16.12 7.09961 17.5 7.09961ZM6.45508 14.2959C6.16048 15.3132 6 16.3878 6 17.5C6 18.6119 6.16065 19.6861 6.45508 20.7031L0 17.5L6.45508 14.2959ZM35 17.5L28.5439 20.7031C28.8384 19.686 29 18.612 29 17.5C29 16.3877 28.8386 15.3133 28.5439 14.2959L35 17.5ZM11.9541 7.42383C10.0493 8.47447 8.47447 10.0493 7.42383 11.9541L5.12598 5.12598L11.9541 7.42383ZM27.5752 11.9541C26.5244 10.0492 24.9499 8.47439 23.0449 7.42383L29.874 5.12598L27.5752 11.9541ZM20.7031 6.45508C19.6861 6.16065 18.6119 6 17.5 6C16.3878 6 15.3132 6.16048 14.2959 6.45508L17.5 0L20.7031 6.45508Z' fill='%23FFBF00'/%3E%3C/svg%3E%0A");
  Left: 18px;
  animation: LightAnim 0.3s ease;
}
#darkLightSwitch.light {
  background-color: #b7dcff;
}
#darkLightSwitch.auto::before{
  background-image: url("data:image/svg+xml,%3Csvg width='35' height='35' viewBox='0 0 35 35' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M22.772 25.604H11.714L9.814 31H5.292L14.754 4.552H19.77L29.232 31H24.672L22.772 25.604ZM21.556 22.07L17.262 9.796L12.93 22.07H21.556Z' fill='%23FFF'/%3E%3C/svg%3E%0A");
  Left: 78px;
  animation: AutoAnim 0.3s ease;
}
#darkLightSwitch.dark::before{
  background-image:  url("data:image/svg+xml,%3Csvg width='35' height='35' viewBox='0 0 35 35' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M21.6271 3.69749C29.3005 6.36716 33.9066 14.9306 31.2599 22.5389C28.6128 30.1472 19.5868 34.2667 12.1964 31.0863C10.2361 30.2427 8.47849 29.0834 7.00306 27.6944C13.4772 29.12 20.141 25.5029 22.3758 19.0799C24.5821 12.7383 21.7058 5.86091 15.8955 2.8956C17.7836 2.78471 19.7266 3.03636 21.6271 3.69749Z' fill='%23FFBF00'/%3E%3C/svg%3E%0A");
  Left: 137px;
  animation: DarkAnim 0.3s ease;
}
#darkLightSwitch.dark {
  background-color: #9a85e6;
}
input[type='range']::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 40px;
  height: 40px;
  border-radius: 20px;
  cursor: ew-resize;
  background-color: #444;
  margin-top: 0px;
  box-shadow: 3px 3px 6px 0px rgba(0,0,0,0.30);
}

js:

window.addEventListener("load", (event) => {
  console.log("page is fully loaded");
  
  var objSwitch = document.getElementById("darkLightSwitch");     // get switch
  setSwitch(objSwitch);                                           // set init state
  objSwitch.addEventListener("input", (event) => {                // set listner on input event
    setSwitch(event.target);                                          // set state
  });
  
});

function setSwitch(obj) {             // function sets state of switch
  console.log(obj.value);
  
  if (obj.value == 1) {
    obj.className = "light";
    document.getElementsByTagName("body")[0].className = '';
  } else if (obj.value == 2) {
    obj.className = "auto";
  } else {
    obj.className = 'dark';
    document.getElementsByTagName("body")[0].className = 'dark';
  }
}
